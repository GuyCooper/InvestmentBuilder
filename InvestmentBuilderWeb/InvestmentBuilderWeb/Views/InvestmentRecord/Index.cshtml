@model IEnumerable<InvestmentBuilderWeb.Models.CompanyDataModel>
@{
    ViewBag.Title = "InvestmentRecordView";
}

<ul class="nav nav-tabs nav-justified">
    <li><a href="@Url.Action("index")">Portfolio</a></li>
    <li><a href="@Url.Action("CashFlow")">CashFlow</a></li>
    <li><a href="@Url.Action("Performance")">Performance</a></li>
</ul>

    <ul class="nav nav-tabs navbar-right">
        <li><a href="@Url.Action("Create")" class="btn btn-primary" >Create New </a></li>
    </ul>
    <p />

    <table class="table table-striped table-condensed">
        <thead>
            <tr>
                <th>Name</th>
                <th>Quantity</th>
                <th>Last Brought</th>
                <th>Avg.Price Paid</th>
                <th>Total Cost</th>
                <th>Current Price</th>
                <th>Net Value</th>
                <th>Profit/Loss</th>
                <th>Month Change%</th>
            </tr>
        </thead>

        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Quantity)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.LastBrought)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.AveragePricePaid)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.TotalCost)
                    </td>
                    <td>
                        @using (Html.BeginForm("UpdatePrice", "InvestmentRecord", FormMethod.Get, new { id = "indexItem" }))
                        {
                            <input type="hidden" name="investment" value="@item.Name" />
                            <input name="share_price" value=@item.SharePrice 
                                   onchange="javascript:document.getElementById('indexItem').submit()" />
                        }
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.NetSellingValue)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ProfitLoss)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.MonthChangeRatio)
                    </td>
                    <td>
                        <ul class="nav nav-tabs">
                            <li><a href="@Url.Action("Edit", "InvestmentRecord", item )" class="btn btn-sm">Edit</a></li>
                            <li><a href="@Url.Action("Delete", "InvestmentRecord", item)" class="btn btn-sm">Delete</a></li>
                        </ul>
                    </td>
                </tr>
            }
        </tbody>
    </table>
